<style type="text/css">
@import url(//fonts.googleapis.com/css?family=Yanone+Kaffeesatz);
@import url(//fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic);
@import url(//fonts.googleapis.com/css?family=Ubuntu+Mono:400,700,400italic);
body { font-family: 'Droid Serif'; }
h1, h2, h3 {
  font-family: 'Yanone Kaffeesatz';
  font-weight: normal;
}
      .remark-code, .remark-inline-code { font-family: 'Ubuntu Mono'; }
</style>

<textarea id="source">
class: center, middle
# WebSockets and Sockets.io

---

class: center, middle
# What is the problem?
We want to communicate the server with the client.
--
It sounds simple, right :P
--
How I can do that?
--

## Reverse Ajax
Is a concept for sending data from the server to the client.
---

## How I can implement it?
Exists diffent Reverse Ajax communication techniques, among which:
--

* polling
* streaming
* Comet
* long polling
---

## HTTP polling
<img src="images/fig01.gif" alt="fig01.gif"/>

--

Polling involves issuing a request from the client to the server to ask for some data

--

- **Time between requests**
- **consume bandwidth**

---



# .center[What is WebSocket?]

The HTML5 WebSockets specification defines an API that enables a full-duplex communication channel
between the user's browser and a server, that channel operates through a single TCP socket over the Web.

--

WebSocket represents the next evolutionary step in web communication compared to Comet and Ajax

--

The IETF standardised WebSockets in 2011

--

All major browsers began to roll out support for the standard

---
class: center, middle
# Architecture
<img src="images/websocket-architecture.jpg" alt="websocket-architecture.jpg"/>
---

# What problem resolves?
class: center, middle
- Reduction in unnecessary network traffic and latency compared to the unscalable polling and long-polling
---

# what about Socket.io?

- Socket.IO is an event-based bi-directional communication layer for realtime web applications, built atop Engine.IO

- It abstracts many transports, including AJAX long-polling and WebSockets, into a single API

- It allows developers to send and receive data without worrying about cross-browser compatibility.

---

## First Major Release

- Socket.IO finally reached version 1.0 on the 28th of May, 2014

--

- The Socket.IO project contained two parts before 1.0: a transport handling implementation
and a high-level API

--

- Transport handling has been moved out into a separate, framework-agnostic project: Engine.IO


</textarea>

<script src="//gnab.github.io/remark/downloads/remark-latest.min.js"> </script>
<script>
//var slideshow = remark.create();
</script>

<script src="bower_components/jquery/dist/jquery.js"> </script>
<script src="bower_components/socket.io-client/socket.io.js"> </script>


<div id="login">
  <h2> Login: </h2>
  <input id="username" type="text">
  <button onclick="login()"> Login </button>
</div>


<script>
var socket = io();

function login () {
  var username = document.getElementById('username').value;
  socket.emit('new user', username);
}

socket.on('keyEvent', function (data) {
  document.location.href = data.url;
});

socket.on('login', function (data) {
  if (data.ok) {
    document.getElementById('source').style.display = "block";
    document.getElementById('login').style.display = "none";
    var slideshow = remark.create();
  }
  else alert('User "' + data.username + '" is already used.');
});

$(function () {
  document.getElementById('source').style.display = "none";

}).keyup(function(e) {
  var url = document.location.href;

  if (e.keyCode == 37 || e.keyCode == 38) {
    socket.emit('keyEvent', {url: url});
  }

  if (e.keyCode == 39 || e.keyCode == 40) {
    socket.emit('keyEvent', {url: url});
  }
});


</script>


